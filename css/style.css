/* ==========================================================================
   1. ROOT VARIABLES & DESIGN TOKENS
   - Defines the entire design system for light and dark themes.
   ========================================================================== */
:root {
  /* Colors */
  --color-primary: #1E40AF;
  --color-secondary: #059669;
  --color-accent: #D97706;
  
  /* Light Theme */
  --color-background: #F9FAFB;
  --color-surface: #FFFFFF;
  --color-text-primary: #1F2937;
  --color-text-secondary: #4B5563;
  --color-heading: #111827;
  --color-border: rgba(0, 0, 0, 0.1);
  --color-button-text: #FFFFFF;
  /* High-performance replacement for the blur effect */
  --color-surface-glass: rgba(255, 255, 255, 0.85);

  /* Typography */
  --font-family-heading: 'Lora', serif;
  --font-family-body: 'Inter', sans-serif;
  
  /* Layout */
  --spacing-md: 16px;
  --spacing-lg: 32px;
  --spacing-xl: 64px;
  --container-width: 1140px;
  --container-padding: 20px;
  --border-radius: 12px;

  /* Shadows (simplified for performance) */
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
}

html[data-theme="dark"] {
  --color-primary: #60A5FA;
  --color-secondary: #34D399;
  --color-accent: #FBBF24;
  --color-background: #111827;
  --color-surface: #1F2937;
  --color-text-primary: #F9FAFB;
  --color-text-secondary: #9CA3AF;
  --color-heading: #FFFFFF;
  --color-border: rgba(255, 255, 255, 0.15);
  --color-button-text: #111827;
  --color-surface-glass: rgba(25, 35, 50, 0.8);
}

/* ==========================================================================
   2. GLOBAL STYLES & RESET (MOBILE-FIRST)
   ========================================================================== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  font-family: var(--font-family-body);
  color: var(--color-text-primary);
  background-color: var(--color-background);
  line-height: 1.65;
  transition: background-color 0.3s ease, color 0.3s ease;
}
h1, h2, h3, h4 { font-family: var(--font-family-heading); color: var(--color-heading); line-height: 1.3; font-weight: 600; }
/* Fluid Typography for responsive headings */
h1 { font-size: clamp(2.25rem, 6vw, 3.25rem); }
h2 { font-size: clamp(1.75rem, 5vw, 2.5rem); }
h3 { font-size: 1.25rem; }
a { color: var(--color-secondary); text-decoration: none; transition: color 0.2s; }
a:hover { color: var(--color-primary); }
ul { list-style: none; }
img { max-width: 100%; display: block; }
p { color: var(--color-text-secondary); margin-bottom: var(--spacing-md); }

/* ==========================================================================
   3. LAYOUT & UTILITY CLASSES
   ========================================================================== */
.container { width: 100%; max-width: var(--container-width); margin: 0 auto; padding: 0 var(--container-padding); }
.section { padding: var(--spacing-xl) 0; }
.section-header { text-align: center; margin-bottom: var(--spacing-lg); }
.section-title { margin-bottom: var(--spacing-md); }
.highlight { color: var(--color-secondary); }

/* ==========================================================================
   4. HEADER & NAVIGATION (PERFORMANCE-FOCUSED)
   ========================================================================== */
.page-header {
    position: sticky; top: 0; z-index: 1000;
    transition: background-color 0.4s ease, border-bottom-color 0.4s ease;
    border-bottom: 1px solid transparent;
}
.page-header.is-sticky {
    background-color: var(--color-surface-glass);
    border-bottom-color: var(--color-border);
    box-shadow: var(--shadow-md);
}
.header-wrap { display: flex; justify-content: space-between; align-items: center; min-height: 70px; }
.branding__logo img { max-width: 110px; }
.logo-dark { display: none; }
html[data-theme="dark"] .logo-light { display: none; }
html[data-theme="dark"] .logo-dark { display: block; }
.header-right { display: flex; align-items: center; gap: var(--spacing-md); }
.page-open-mobile-menu, .theme-toggle { background: none; border: none; cursor: pointer; color: var(--color-text-primary); padding: 5px; }
.theme-toggle .material-symbols-outlined, .page-open-mobile-menu .material-symbols-outlined { font-size: 24px; }
.theme-icon-light { display: none; }
html[data-theme="dark"] .theme-icon-dark { display: none; }
html[data-theme="dark"] .theme-icon-light { display: block; }

/* Desktop Navigation (hidden by default) */
.navigation { display: none; }

/* Observer Sentinel for high-performance sticky toggle */
#header-observer-sentinel { position: absolute; top: 70px; height: 1px; width: 100%; z-index: -1; }

/* ==========================================================================
   5. MOBILE NAVIGATION MENU (OVERLAY)
   ========================================================================== */
#page-mobile-main-menu {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: var(--color-background);
    z-index: 2000;
    transform: translateX(100%);
    transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    display: flex; flex-direction: column; padding: var(--spacing-xl) var(--container-padding);
}
body.mobile-menu-is-open #page-mobile-main-menu { transform: translateX(0); }
.page-close-mobile-menu {
    position: absolute; top: var(--spacing-md); right: var(--container-padding);
    background: none; border: none; cursor: pointer; color: var(--color-text-primary);
}
.page-close-mobile-menu .material-symbols-outlined { font-size: 36px; }
#page-mobile-main-menu .menu__container {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    gap: var(--spacing-lg); text-align: center; height: 100%;
}
#page-mobile-main-menu .menu-item a { font-size: 1.5rem; font-weight: 600; font-family: var(--font-family-heading); }

/* ==========================================================================
   6. HERO SECTION
   ========================================================================== */
.hero-section { text-align: center; padding: 80px 0; }
.hero-content { max-width: 750px; margin: 0 auto; }
.hero__subtitle { font-size: 1.125rem; }

/* ==========================================================================
   7. CARDS & GRIDS (MOBILE-FIRST)
   ========================================================================== */
.card {
    background-color: var(--color-surface);
    border-radius: var(--border-radius);
    padding: var(--spacing-lg);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-md);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
.card-title { margin-bottom: 8px; }
.card-icon { font-size: 2.5rem; color: var(--color-secondary); margin-bottom: var(--spacing-md); }

/* All grids stack on mobile by default */
.card-grid-3col, .card-grid-4col, .impact-grid {
    display: grid;
    gap: var(--spacing-lg);
}
.cta-card, .training-card { text-align: center; }

/* ==========================================================================
   8. TESTIMONIAL & LOGO SCROLLERS (PERFORMANCE)
   ========================================================================== */
/* Testimonials */
.carousel-track {
    display: flex; overflow-x: auto;
    scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch;
    scrollbar-width: none; /* Hide scrollbar */
}
.carousel-track::-webkit-scrollbar { display: none; }
.carousel-slide { flex: 0 0 90%; padding: 5px; scroll-snap-align: center; }
.testimonial-card { height: 100%; display: flex; flex-direction: column; justify-content: space-between; }
.testimonial-card__author { display: flex; align-items: center; gap: var(--spacing-md); padding-top: var(--spacing-md); }
.testimonial-card__author img { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; }
.carousel-controls { display: flex; justify-content: center; gap: var(--spacing-md); margin-top: var(--spacing-lg); }
.carousel-controls button {
    background: var(--color-surface); border: 1px solid var(--color-border); color: var(--color-text-primary);
    border-radius: 50%; width: 50px; height: 50px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease;
}
.carousel-controls button:hover { background: var(--color-primary); color: white; }

/* Logo Scroller */
@keyframes scroll { to { transform: translateX(-50%); } }
.logo-scroller {
    max-width: 100%; overflow: hidden;
    -webkit-mask: linear-gradient(90deg, transparent, white 10%, white 90%, transparent);
    mask: linear-gradient(90deg, transparent, white 10%, white 90%, transparent);
}
.scroller-inner {
    display: flex; flex-wrap: nowrap; width: max-content; gap: 50px;
    animation: scroll 40s linear infinite;
}
.scroller-inner:hover { animation-play-state: paused; }
.scroller-inner img { height: 35px; width: auto; filter: grayscale(100%); opacity: 0.7; transition: opacity 0.3s ease; }
.scroller-inner img:hover { opacity: 1; }

/* ==========================================================================
   9. FOOTER
   ========================================================================== */
.page-footer { background-color: var(--color-surface); border-top: 1px solid var(--color-border); padding-top: var(--spacing-xl); text-align: center; }
.footer-grid {
    display: grid; gap: var(--spacing-lg); padding-bottom: var(--spacing-xl);
    text-align: left;
}
.footer-col__title { font-size: 1.1rem; }
.footer-col ul li a { color: var(--color-text-secondary); }
.social-links { display: flex; gap: var(--spacing-md); }
.social-links a { color: var(--color-text-secondary); }
.copyright { padding: var(--spacing-lg) 0; border-top: 1px solid var(--color-border); font-size: 0.9rem; }
.copyright p { color: var(--color-text-secondary); margin: 0; }

/* ==========================================================================
   10. SCROLL ANIMATIONS (PERFORMANCE)
   ========================================================================== */
.scroll-animate {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}
.scroll-animate.is-animated { opacity: 1; transform: translateY(0); }

/* ==========================================================================
   11. DESKTOP & TABLET STYLES (PROGRESSIVE ENHANCEMENT)
   ========================================================================== */
/* Medium screens (tablets) */
@media (min-width: 768px) {
    .card-grid-3col { grid-template-columns: repeat(3, 1fr); }
    .card-grid-4col, .impact-grid { grid-template-columns: repeat(2, 1fr); }
    .carousel-slide { flex-basis: 50%; }
    .footer-grid { grid-template-columns: repeat(4, 1fr); text-align: left; }
    .footer-col { justify-self: start; }
}

/* Large screens (desktops) */
@media (min-width: 992px) {
    /* Show desktop nav, hide mobile hamburger */
    .navigation { display: block; }
    .page-open-mobile-menu { display: none; }
    .menu__container { display: flex; gap: var(--spacing-lg); }
    .menu-item > a { font-weight: 500; color: var(--color-text-primary); position: relative; padding-bottom: 5px; }
    .menu-item > a::after {
        content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px;
        background-color: var(--color-secondary); transform: scaleX(0); transition: transform 0.3s ease;
    }
    .menu-item:hover > a::after { transform: scaleX(1); }
    
    .card-grid-4col { grid-template-columns: repeat(4, 1fr); }
    .impact-grid { grid-template-columns: repeat(4, 1fr); }
}